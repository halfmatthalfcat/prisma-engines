<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This tiny crate checks that the running or installed `rustc` meets some version requirements. The version is queried by calling the Rust compiler with `--version`. The path to the compiler is determined first via the `RUSTC` environment variable. If it is not set, then `rustc` is used. If that fails, no determination is made, and calls return `None`."><meta name="keywords" content="rust, rustlang, rust-lang, version_check"><title>version_check - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../version_check/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Crate version_check</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.9.4</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all version_check's items</p></a><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="version_check" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../version_check/index.html"><img class="rust-logo" src="../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">version_check</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/version_check/lib.rs.html#1-493" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This tiny crate checks that the running or installed <code>rustc</code> meets some
version requirements. The version is queried by calling the Rust compiler
with <code>--version</code>. The path to the compiler is determined first via the
<code>RUSTC</code> environment variable. If it is not set, then <code>rustc</code> is used. If
that fails, no determination is made, and calls return <code>None</code>.</p>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<ul>
<li>
<p>Set a <code>cfg</code> flag in <code>build.rs</code> if the running compiler was determined to
be at least version <code>1.13.0</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">version_check</span> <span class="kw">as</span> <span class="ident">rustc</span>;

<span class="kw">if</span> <span class="ident">rustc::is_min_version</span>(<span class="string">&quot;1.13.0&quot;</span>).<span class="ident">unwrap_or</span>(<span class="bool-val">false</span>) {
    <span class="macro">println!</span>(<span class="string">&quot;cargo:rustc-cfg=question_mark_operator&quot;</span>);
}</code></pre></div>
<p>See <a href="fn.is_max_version.html" title="is_max_version"><code>is_max_version</code></a> or <a href="fn.is_exact_version.html" title="is_exact_version"><code>is_exact_version</code></a> to check if the compiler
is <em>at most</em> or <em>exactly</em> a certain version.</p>
</li>
<li>
<p>Check that the running compiler was released on or after <code>2018-12-18</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">version_check</span> <span class="kw">as</span> <span class="ident">rustc</span>;

<span class="kw">match</span> <span class="ident">rustc::is_min_date</span>(<span class="string">&quot;2018-12-18&quot;</span>) {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">&quot;Yep! It&#39;s recent!&quot;</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">&quot;No, it&#39;s older.&quot;</span>,
    <span class="prelude-val">None</span> =&gt; <span class="string">&quot;Couldn&#39;t determine the rustc version.&quot;</span>
};</code></pre></div>
<p>See <a href="fn.is_max_date.html" title="is_max_date"><code>is_max_date</code></a> or <a href="fn.is_exact_date.html" title="is_exact_date"><code>is_exact_date</code></a> to check if the compiler was
released <em>prior to</em> or <em>exactly on</em> a certain date.</p>
</li>
<li>
<p>Check that the running compiler supports feature flags:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">version_check</span> <span class="kw">as</span> <span class="ident">rustc</span>;

<span class="kw">match</span> <span class="ident">rustc::is_feature_flaggable</span>() {
    <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) =&gt; <span class="string">&quot;Yes! It&#39;s a dev or nightly release!&quot;</span>,
    <span class="prelude-val">Some</span>(<span class="bool-val">false</span>) =&gt; <span class="string">&quot;No, it&#39;s stable or beta.&quot;</span>,
    <span class="prelude-val">None</span> =&gt; <span class="string">&quot;Couldn&#39;t determine the rustc version.&quot;</span>
};</code></pre></div>
</li>
<li>
<p>Check that the running compiler supports a specific feature:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">version_check</span> <span class="kw">as</span> <span class="ident">rustc</span>;

<span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span>(<span class="bool-val">true</span>) <span class="op">=</span> <span class="ident">rustc::supports_feature</span>(<span class="string">&quot;doc_cfg&quot;</span>) {
   <span class="macro">println!</span>(<span class="string">&quot;cargo:rustc-cfg=has_doc_cfg&quot;</span>);
}</code></pre></div>
</li>
<li>
<p>Check that the running compiler is on the stable channel:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">version_check</span> <span class="kw">as</span> <span class="ident">rustc</span>;

<span class="kw">match</span> <span class="ident">rustc::Channel::read</span>() {
    <span class="prelude-val">Some</span>(<span class="ident">c</span>) <span class="kw">if</span> <span class="ident">c</span>.<span class="ident">is_stable</span>() =&gt; <span class="macro">format!</span>(<span class="string">&quot;Yes! It&#39;s stable.&quot;</span>),
    <span class="prelude-val">Some</span>(<span class="ident">c</span>) =&gt; <span class="macro">format!</span>(<span class="string">&quot;No, the channel {} is not stable.&quot;</span>, <span class="ident">c</span>),
    <span class="prelude-val">None</span> =&gt; <span class="macro">format!</span>(<span class="string">&quot;Couldn&#39;t determine the rustc version.&quot;</span>)
};</code></pre></div>
</li>
</ul>
<p>To interact with the version, release date, and release channel as structs,
use <a href="struct.Version.html" title="Version"><code>Version</code></a>, <a href="struct.Date.html" title="Date"><code>Date</code></a>, and <a href="struct.Channel.html" title="Channel"><code>Channel</code></a>, respectively. The <a href="fn.triple.html" title="triple()"><code>triple()</code></a>
function returns all three values efficiently.</p>
<h2 id="alternatives" class="section-header"><a href="#alternatives">Alternatives</a></h2>
<p>This crate is dead simple with no dependencies. If you need something more
and don’t care about panicking if the version cannot be obtained, or if you
don’t mind adding dependencies, see
<a href="https://crates.io/crates/rustc_version">rustc_version</a>.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Channel.html" title="version_check::Channel struct">Channel</a></div><div class="item-right docblock-short"><p>Release channel: “dev”, “nightly”, “beta”, or “stable”.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Date.html" title="version_check::Date struct">Date</a></div><div class="item-right docblock-short"><p>Release date including year, month, and day.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Version.html" title="version_check::Version struct">Version</a></div><div class="item-right docblock-short"><p>Version number: <code>major.minor.patch</code>, ignoring release channel.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_exact_date.html" title="version_check::is_exact_date fn">is_exact_date</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> was released <strong>exactly</strong> on
some date.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_exact_version.html" title="version_check::is_exact_version fn">is_exact_version</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> is <strong>exactly</strong> some version.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_feature_flaggable.html" title="version_check::is_feature_flaggable fn">is_feature_flaggable</a></div><div class="item-right docblock-short"><p>Checks whether the running or installed <code>rustc</code> supports feature flags.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_max_date.html" title="version_check::is_max_date fn">is_max_date</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> was released <strong>on or before</strong>
some date.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_max_version.html" title="version_check::is_max_version fn">is_max_version</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> is <strong>at most</strong> some maximum
version.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_min_date.html" title="version_check::is_min_date fn">is_min_date</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> was released <strong>on or after</strong>
some date.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.is_min_version.html" title="version_check::is_min_version fn">is_min_version</a></div><div class="item-right docblock-short"><p>Checks that the running or installed <code>rustc</code> is <strong>at least</strong> some minimum
version.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.supports_feature.html" title="version_check::supports_feature fn">supports_feature</a></div><div class="item-right docblock-short"><p>Checks whether the running or installed <code>rustc</code> supports <code>feature</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.triple.html" title="version_check::triple fn">triple</a></div><div class="item-right docblock-short"><p>Reads the triple of <a href="struct.Version.html" title="Version"><code>Version</code></a>, <a href="struct.Channel.html" title="Channel"><code>Channel</code></a>, and <a href="struct.Date.html" title="Date"><code>Date</code></a> of the installed
or running <code>rustc</code>.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="version_check" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>